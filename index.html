<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Colmado El Ideal - CatÃ¡logo</title>
<style>
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#fff7ed;color:#333;}
.hero{height:60vh;background:url("logo.png") center/cover no-repeat;}
header{background:#f57c00;color:white;text-align:center;padding:20px;box-shadow:0 4px 10px rgba(0,0,0,.2);}
main{max-width:1000px;margin:auto;padding:20px;}
.card{background:white;padding:20px;margin-bottom:20px;border-radius:14px;box-shadow:0 6px 15px rgba(0,0,0,.1);}
h2{color:#ef6c00;}
.product-card{display:flex;align-items:center;margin-bottom:15px;border-bottom:1px solid #eee;padding-bottom:10px;}
.product-card img{width:80px;height:80px;object-fit:cover;border-radius:8px;margin-right:15px;}
.product-info{flex:1;}
.product-info strong{display:block;margin-bottom:5px;}
.qty-controls{display:flex;align-items:center;margin-top:5px;}
.qty-controls button{background:#f57c00;border:none;color:white;padding:6px 12px;border-radius:6px;cursor:pointer;font-weight:bold;}
.qty-controls input{width:50px;text-align:center;margin:0 5px;border:1px solid #ccc;border-radius:6px;padding:4px;}
.agotado{color:#999;text-decoration:line-through;}
#pedido{white-space:pre-line;background:#fff3e0;padding:15px;border-radius:10px;}
#vistaCarrito{background:#fff3e0;padding:10px;border-radius:10px;margin-top:10px;}
#vistaCarrito img{width:50px;height:50px;object-fit:cover;border-radius:6px;margin-right:10px;vertical-align:middle;}
.btn{display:inline-block;margin-top:15px;background:#25D366;color:white;padding:14px 22px;border-radius:10px;text-decoration:none;font-weight:bold;transition:all .2s;}
.btn:hover{opacity:.9;}
</style>
</head>
<body>

<div class="hero"></div>
<header>
<h1>Colmado El Ideal</h1>
<p>Mini-tienda con pedidos por WhatsApp</p>
</header>

<main>

<div class="card">
<h2>ðŸ›’ CatÃ¡logo para clientes</h2>
<div id="productos"></div>
</div>

<div class="card">
<h2>ðŸ“¦ Tu pedido</h2>
<div id="pedido">No hay productos agregados.</div>
<div id="vistaCarrito"></div>
<a class="btn" id="enviar" target="_blank">ðŸ“² Enviar pedido por WhatsApp</a>
</div>

</main>
<footer>Â© 2026 Colmado El Ideal</footer>

<script>
// Datos iniciales (los productos se mantienen en localStorage)
let catalogo = JSON.parse(localStorage.getItem("catalogo")) || [];
let pedido = JSON.parse(localStorage.getItem("pedido")) || [];

function mostrarProductos(){
  const cont=document.getElementById("productos");
  cont.innerHTML="";
  catalogo.forEach((p,i)=>{
    const div=document.createElement("div");
    div.className="product-card";
    div.innerHTML=`
      <img src="${p.imagen}" alt="${p.nombre}">
      <div class="product-info">
        <strong>${p.nombre} - RD$${p.precio}</strong>
        ${p.disponible ? `
        <div class="qty-controls">
          <button onclick="cambiarCantidad(${i},-1)">-</button>
          <input type="number" min="1" value="1" id="qty${i}">
          <button onclick="cambiarCantidad(${i},1)">+</button>
          <button onclick="agregarAlPedido(${i})">Agregar</button>
        </div>` : `<span class="agotado">Agotado</span>`}
      </div>
    `;
    cont.appendChild(div);
  });
}

function cambiarCantidad(i, delta){
  const input=document.getElementById("qty"+i);
  let val=parseInt(input.value);
  val+=delta;
  if(val<1) val=1;
  input.value=val;
}

function agregarAlPedido(i){
  const p=catalogo[i];
  const qty=parseInt(document.getElementById("qty"+i).value);
  pedido.push({nombre:p.nombre, precio:p.precio, cantidad:qty, imagen:p.imagen});
  localStorage.setItem("pedido", JSON.stringify(pedido));
  actualizarPedido();
}

function actualizarPedido(){
  const vista=document.getElementById("vistaCarrito");
  if(pedido.length===0){
    document.getElementById("pedido").innerText="No hay productos agregados.";
    vista.innerHTML="";
    document.getElementById("enviar").href="#";
    return;
  }
  let texto="", total=0;
  vista.innerHTML="";
  pedido.forEach(p=>{
    texto+=`${p.cantidad} x ${p.nombre} = RD$${p.precio*p.cantidad}\n`;
    total+=p.precio*p.cantidad;
    const img=document.createElement("img");
    img.src=p.imagen;
    img.alt=p.nombre;
    vista.appendChild(img);
    vista.appendChild(document.createTextNode(`${p.cantidad} x ${p.nombre} = RD$${p.precio*p.cantidad}`));
    vista.appendChild(document.createElement("br"));
  });
  texto+=`\nTotal: RD$${total}`;
  document.getElementById("pedido").innerText=texto;
  let mensaje=encodeURIComponent("Hola, quiero hacer este pedido:\n\n"+texto);
  document.getElementById("enviar").href="https://wa.me/18296020646?text="+mensaje;
}

mostrarProductos();
actualizarPedido();
</script>

</body>
</html>
