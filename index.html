<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Colmado El Ideal - Panel Visual</title>
<style>
body {
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#fff7ed;
  color:#333;
}

.hero{
  height:60vh;
  background:url("logo.png") center/cover no-repeat;
}

header{
  background:#f57c00;
  color:white;
  text-align:center;
  padding:20px;
}

main{
  max-width:1000px;
  margin:auto;
  padding:20px;
}

.card{
  background:white;
  padding:20px;
  margin-bottom:20px;
  border-radius:14px;
  box-shadow:0 6px 15px rgba(0,0,0,.1);
}

h2{color:#ef6c00;}

.product{
  display:flex;
  align-items:center;
  justify-content:space-between;
  border-bottom:1px solid #eee;
  padding:10px 0;
}

.product img{
  width:60px;
  height:60px;
  object-fit:cover;
  border-radius:8px;
  margin-right:10px;
}

.product-info{
  flex:1;
  display:flex;
  flex-direction:column;
}

.product-qty{
  display:flex;
  align-items:center;
  margin-top:5px;
}

.product-qty button{
  background:#f57c00;
  border:none;
  color:white;
  padding:6px 12px;
  font-weight:bold;
  cursor:pointer;
  border-radius:6px;
  margin-right:5px;
}

.product-qty input{
  width:50px;
  text-align:center;
  margin-right:5px;
  border:1px solid #ccc;
  border-radius:6px;
  padding:4px;
}

.agotado{
  color:#999;
  text-decoration:line-through;
}

#pedido{
  white-space:pre-line;
  background:#fff3e0;
  padding:15px;
  border-radius:10px;
}

.btn{
  display:inline-block;
  margin-top:15px;
  background:#25D366;
  color:white;
  padding:14px 22px;
  border-radius:10px;
  text-decoration:none;
  font-weight:bold;
}

#panelEdicion{
  background:#fff3e0;
  padding:15px;
  border-radius:10px;
  margin-bottom:20px;
}

#panelEdicion input, #panelEdicion select{
  margin:5px 0;
  padding:6px;
  width:100%;
  box-sizing:border-box;
  border-radius:6px;
  border:1px solid #ccc;
}

#panelEdicion button{
  margin-top:10px;
  background:#f57c00;
  color:white;
  border:none;
  padding:10px 15px;
  font-weight:bold;
  border-radius:8px;
  cursor:pointer;
}
</style>
</head>
<body>

<div class="hero"></div>
<header>
<h1>Colmado El Ideal</h1>
<p>Panel visual para editar cat치logo y enviar pedidos</p>
</header>

<main>

<div class="card">
<h2>游 Panel de edici칩n de productos</h2>
<div id="panelEdicion">
  <select id="productoSelect"></select>
  <input type="text" id="nombreProd" placeholder="Nombre del producto">
  <input type="number" id="precioProd" placeholder="Precio">
  <input type="text" id="imagenProd" placeholder="URL de la imagen">
  <select id="disponibleProd">
    <option value="true">Disponible</option>
    <option value="false">Agotado</option>
  </select>
  <button onclick="guardarProducto()">Guardar cambios</button>
  <button onclick="agregarProducto()">Agregar nuevo producto</button>
</div>
</div>

<div class="card">
<h2>游닍 Cat치logo visible para clientes</h2>
<div id="productos"></div>
</div>

<div class="card">
<h2>游닍 Tu pedido</h2>
<div id="pedido">No hay productos agregados.</div>
<a class="btn" id="enviar" target="_blank">游 Enviar pedido por WhatsApp</a>
</div>

</main>

<footer>
춸 2026 Colmado El Ideal
</footer>

<script>
// Datos del cat치logo
let catalogo = JSON.parse(localStorage.getItem("catalogo")) || [
  {nombre:"Pan", precio:20, imagen:"https://i.imgur.com/Lf6wq3X.png", disponible:true},
  {nombre:"Huevos", precio:15, imagen:"https://i.imgur.com/3iYv1F0.png", disponible:true},
  {nombre:"Refresco", precio:50, imagen:"https://i.imgur.com/jY7jWqZ.png", disponible:true},
  {nombre:"Cerveza", precio:80, imagen:"https://i.imgur.com/7w5e7Zy.png", disponible:false}
];

let pedido = JSON.parse(localStorage.getItem("pedido")) || [];

function mostrarProductos(){
  const cont = document.getElementById("productos");
  cont.innerHTML = "";
  catalogo.forEach((p,i)=>{
    const div = document.createElement("div");
    div.className="product";
    div.innerHTML = `
      <img src="${p.imagen}" alt="${p.nombre}">
      <div class="product-info">
        <strong>${p.nombre} - RD$${p.precio}</strong>
        ${p.disponible ? `<div class="product-qty">
          <button onclick="cambiarCantidad(${i},-1)">-</button>
          <input type="number" min="1" value="1" id="qty${i}">
          <button onclick="cambiarCantidad(${i},1)">+</button>
          <button onclick="agregarAlPedido(${i})">Agregar</button>
        </div>` : `<span class="agotado">Agotado</span>`}
      </div>
    `;
    cont.appendChild(div);
  });
  actualizarSelect();
}

function cambiarCantidad(i, delta){
  const input = document.getElementById("qty"+i);
  let val=parseInt(input.value);
  val+=delta;
  if(val<1) val=1;
  input.value=val;
}

function agregarAlPedido(i){
  const p=catalogo[i];
  const qty=parseInt(document.getElementById("qty"+i).value);
  pedido.push({nombre:p.nombre, precio:p.precio, cantidad:qty});
  localStorage.setItem("pedido", JSON.stringify(pedido));
  actualizarPedido();
}

function actualizarPedido(){
  if(pedido.length===0){
    document.getElementById("pedido").innerText="No hay productos agregados.";
    document.getElementById("enviar").href="#";
    return;
  }
  let texto="";
  let total=0;
  pedido.forEach(p=>{
    texto+=`${p.cantidad} x ${p.nombre} = RD$${p.precio*p.cantidad}\n`;
    total+=p.precio*p.cantidad;
  });
  texto+=`\nTotal: RD$${total}`;
  document.getElementById("pedido").innerText=texto;
  let mensaje=encodeURIComponent("Hola, quiero hacer este pedido:\n\n"+texto);
  document.getElementById("enviar").href="https://wa.me/18296020646?text="+mensaje;
}

// PANEL VISUAL
function actualizarSelect(){
  const select=document.getElementById("productoSelect");
  select.innerHTML="";
  catalogo.forEach((p,i)=>{
    const opt=document.createElement("option");
    opt.value=i;
    opt.text=p.nombre;
    select.appendChild(opt);
  });
  cargarProducto();
}

function cargarProducto(){
  const i=document.getElementById("productoSelect").value;
  const p=catalogo[i];
  document.getElementById("nombreProd").value=p.nombre;
  document.getElementById("precioProd").value=p.precio;
  document.getElementById("imagenProd").value=p.imagen;
  document.getElementById("disponibleProd").value=p.disponible;
}

function guardarProducto(){
  const i=document.getElementById("productoSelect").value;
  catalogo[i]={
    nombre: document.getElementById("nombreProd").value,
    precio: parseInt(document.getElementById("precioProd").value),
    imagen: document.getElementById("imagenProd").value,
    disponible: document.getElementById("disponibleProd").value==="true"
  };
  localStorage.setItem("catalogo", JSON.stringify(catalogo));
  mostrarProductos();
}

function agregarProducto(){
  catalogo.push({
    nombre:"Nuevo producto",
    precio:0,
    imagen:"",
    disponible:true
  });
  localStorage.setItem("catalogo", JSON.stringify(catalogo));
  mostrarProductos();
}

// Carga inicial
mostrarProductos();
actualizarPedido();

// Cambiar campos al seleccionar otro producto
document.getElementById("productoSelect").addEventListener("change", cargarProducto);
</script>

</body>
</html>
